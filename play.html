<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-out {
            opacity: 0;
            transition: opacity 1s ease-out;
        }
    </style>
</head>
<body class="bg-gray-100">
    
    <!-- âœ… Navigation Bar (Fixed at Top) -->
    <nav class="fixed top-0 left-0 w-full bg-white z-50 flex justify-between items-center border border-gray-300 px-4 py-2">
        <!-- Left: DIRE Logo -->
        <div>
            <img class="h-10" src="./assets/dire-logo-final.png" alt="DIRE Logo">
        </div>

        <!-- Right: Menu Button (Redirects to New Page) -->
        <div>
            <button id="menuBtn" class="p-2 border border-gray-400 rounded-md">â˜°</button>
        </div>
    </nav>

    <!-- Opening Section -->
    <section id="opening" class="h-screen flex items-center justify-center bg-white">
        <img class="h-20" src="./assets/dire-logo-final.png" alt="DIRE Logo">
    </section>

    <!-- Chapter 1 Section -->
    <section id="chapter1" class="h-screen flex items-center justify-center bg-gray-200 hidden">
        <h1 class="text-[70px] lg:text-[125px] text-center font-bold text-red-600">CHAPTER 1</h1>
    </section>

    <!-- Game Section -->
    <section id="game" class="h-screen flex flex-col justify-center items-center bg-gray-100 hidden relative">
        <!-- Progress Box -->
        <div class="absolute top-16 left-4 bg-white border border-black px-4 py-2 rounded-lg">
            Step <span id="stepCount">1</span>/9
        </div>

        <!-- Stickman Character -->
        <div id="stickman" class="absolute bottom-50 left-20 flex flex-col items-center">
            <!-- Head -->
            <div class="w-12 h-12 bg-black rounded-full"></div>
            <!-- Body -->
            <div class="w-6 h-20 bg-black rounded-lg"></div>
        </div>

        <!-- Movement Buttons (Bottom Left & Right) -->
        <div class="absolute bottom-12 w-full flex justify-between px-[60px]">
            <button id="leftBtn" class="w-24 h-24 rounded-full bg-white border-4 border-gray-700 flex items-center justify-center shadow-lg">
                <span class="text-8xl font-bold flex items-center justify-center leading-none">&lt;</span>
            </button>
            <button id="rightBtn" class="w-24 h-24 rounded-full bg-white border-4 border-gray-700 flex items-center justify-center shadow-lg">
                <span class="text-8xl font-bold flex items-center justify-center leading-none">&gt;</span>
            </button>
        </div>

    <!-- ðŸ”Š Sound Effect -->
    <audio id="stepSound" src="./assets/step.mp3"></audio>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const opening = document.getElementById("opening");
            const chapter1 = document.getElementById("chapter1");
            const game = document.getElementById("game");
            const stickman = document.getElementById("stickman");
            const stepSound = document.getElementById("stepSound");

            // âœ… Opening Animation (Show for 3s, then fade out)
            setTimeout(() => {
                opening.classList.add("fade-out");
                setTimeout(() => {
                    opening.style.display = "none";
                    chapter1.style.display = "flex";
                }, 1000);
            }, 3000);

            // âœ… Chapter 1 (Show for 3s, then move to game)
            setTimeout(() => {
                chapter1.classList.add("fade-out");
                setTimeout(() => {
                    chapter1.style.display = "none";
                    game.style.display = "flex";
                }, 1000);
            }, 7000);

            // âœ… Redirect Menu Button
            document.getElementById("menuBtn").addEventListener("click", () => {
                window.location.href = "menu.html";
            });

            // Stickman Movement
            let position = 20;
            function moveStickman(direction) {
                if (direction === "left" && position > 0) {
                    position -= 15;
                } else if (direction === "right" && position < window.innerWidth - 70) {
                    position += 15;
                }

                // Move Stickman
                stickman.style.left = `${position}px`;

                // âœ… Play Sound Effect
                stepSound.currentTime = 0;
                stepSound.play();
            }

            // Button Click Movement
            document.getElementById("leftBtn").addEventListener("click", () => moveStickman("left"));
            document.getElementById("rightBtn").addEventListener("click", () => moveStickman("right"));

            // Keyboard Movement
            document.addEventListener("keydown", (event) => {
                if (event.key === "ArrowLeft") moveStickman("left");
                if (event.key === "ArrowRight") moveStickman("right");
            });
        });
    </script>

</body>
</html>